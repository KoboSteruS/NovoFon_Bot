# üéâ NovoFon Voice Bot - –ü—Ä–æ–µ–∫—Ç –ó–ê–í–ï–†–®–Å–ù!

## ‚úÖ –í—Å–µ 6 —ç—Ç–∞–ø–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2024-11-14  
**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 100%

---

## üì¶ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ:

### –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úÖ
- FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- Async PostgreSQL/SQLite
- –ú–æ–¥–µ–ª–∏ –ë–î (Call, Message, CallQueue)
- Health checks
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –≠—Ç–∞–ø 2: NovoFon API ‚úÖ
- HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è NovoFon
- CallManager –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–≤–æ–Ω–∫–∞–º–∏
- API endpoints
- Health checks

### –≠—Ç–∞–ø 3: Asterisk + ARI ‚úÖ
- WebSocket –∫–ª–∏–µ–Ω—Ç –¥–ª—è Asterisk ARI
- Call handler –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π
- –ì–æ—Ç–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Asterisk
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

### –≠—Ç–∞–ø 4: ElevenLabs ASR/TTS ‚úÖ
- Real-time Speech-to-Text –∫–ª–∏–µ–Ω—Ç
- Text-to-Speech (streaming –∏ –æ–±—ã—á–Ω—ã–π)
- Voice processor –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Asterisk
- Audio converter (RTP ‚Üî ElevenLabs)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTP(S) –ø—Ä–æ–∫—Å–∏ –¥–ª—è ElevenLabs (–¥–ª—è —Ä–µ–≥–∏–æ–Ω–æ–≤ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ElevenLabs Agent ID (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `.env`)

### –≠—Ç–∞–ø 5: FSM –ª–æ–≥–∏–∫–∞ –¥–∏–∞–ª–æ–≥–∞ ‚úÖ
- Finite State Machine —Å 11 —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏–π
- –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

### –≠—Ç–∞–ø 6: –û—á–µ—Ä–µ–¥—å –æ–±–∑–≤–æ–Ω–∞ ‚úÖ
- Call queue manager —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
- API endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥—å—é
- Retry –ª–æ–≥–∏–∫–∞
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ scheduling
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```
NovoFon_Bot/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py                      # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ config.py                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database.py                  # –ë–î setup
‚îÇ   ‚îú‚îÄ‚îÄ models.py                    # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ schemas.py                   # Pydantic schemas
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ routers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calls.py                 # API: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queue.py                 # API: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—å—é
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ system.py                # API: system endpoints
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ novofon.py               # NovoFon API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ call_manager.py          # –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–≤–æ–Ω–∫–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ asterisk_ari.py          # Asterisk ARI –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ asterisk_call_handler.py # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–≤–æ–Ω–∫–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ elevenlabs_client.py     # ElevenLabs ASR/TTS
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ voice_processor.py       # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialogue_fsm.py          # FSM –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ call_queue_manager.py    # –ú–µ–Ω–µ–¥–∂–µ—Ä –æ—á–µ—Ä–µ–¥–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/                       # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ asterisk_configs/                # –ì–æ—Ç–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ Asterisk
‚îÇ   ‚îú‚îÄ‚îÄ ari.conf
‚îÇ   ‚îú‚îÄ‚îÄ http.conf
‚îÇ   ‚îú‚îÄ‚îÄ pjsip.conf
‚îÇ   ‚îú‚îÄ‚îÄ extensions.conf
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ ASTERISK_SETUP.md            # –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è Asterisk
‚îÇ   ‚îú‚îÄ‚îÄ ASTERISK_WINDOWS_WSL2.md     # Asterisk –Ω–∞ Windows
‚îÇ   ‚îî‚îÄ‚îÄ NOVOFON_API_TESTING.md       # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
‚îÇ
‚îú‚îÄ‚îÄ alembic/                         # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ logs/                            # –õ–æ–≥–∏
‚îÇ
‚îú‚îÄ‚îÄ requirements.txt                 # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ requirements_minimal.txt         # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ README.md                        # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICKSTART.md                    # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ ASTERISK_QUICKSTART.md           # Asterisk –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ PROGRESS.md                      # –¢—Ä–µ–∫–µ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
‚îú‚îÄ‚îÄ FINAL_SUMMARY.md                 # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îÇ
‚îú‚îÄ‚îÄ run_dev.py                       # Dev —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ test_novofon_simple.py           # –¢–µ—Å—Ç NovoFon API
‚îî‚îÄ‚îÄ your_env_config.txt              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env template)
```

---

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –°–ï–ô–ß–ê–°:

1. **FastAPI —Å–µ—Ä–≤–µ—Ä** —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π (`/docs`)
2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** (PostgreSQL/SQLite)
3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞–º–∏** —á–µ—Ä–µ–∑ API
4. **–û—á–µ—Ä–µ–¥—å –æ–±–∑–≤–æ–Ω–∞** —Å –∞–≤—Ç–æ–æ–±—Ä–∞–±–æ—Ç–∫–æ–π
5. **Health checks** –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### ‚öôÔ∏è –ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏):

6. **Asterisk ARI** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SIP –∑–≤–æ–Ω–∫–∞–º–∏
7. **ElevenLabs ASR/TTS** - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏ —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏
8. **FSM –¥–∏–∞–ª–æ–≥–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã
9. **NovoFon SIP** - –∏—Å—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏

---

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã:

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ë–ï–ó –∑–≤–æ–Ω–∫–æ–≤):

```bash
# 1. –°–æ–∑–¥–∞—Ç—å .env
copy your_env_config.txt .env

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements_minimal.txt

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å
python run_dev.py

# 4. –û—Ç–∫—Ä—ã—Ç—å http://localhost:8000/docs
```

**–ß—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:**
- ‚úÖ API endpoints
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û—á–µ—Ä–µ–¥—å –∑–≤–æ–Ω–∫–æ–≤ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤)
- ‚úÖ Swagger UI

---

### –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–° –∑–≤–æ–Ω–∫–∞–º–∏):

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:**

1. **Asterisk** (—Å–º. `docs/ASTERISK_SETUP.md` –∏–ª–∏ `ASTERISK_QUICKSTART.md`)
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Asterisk (–∏–ª–∏ —á–µ—Ä–µ–∑ WSL2 –Ω–∞ Windows)
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏ –∏–∑ `asterisk_configs/`
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SIP –¥–∞–Ω–Ω—ã–µ –æ—Ç NovoFon

2. **NovoFon SIP**
   - –ü–æ–ª—É—á–∏—Ç—å SIP –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ `asterisk_configs/pjsip.conf`

3. **ElevenLabs**
   - –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á –Ω–∞ elevenlabs.io
   - –£–∫–∞–∑–∞—Ç—å –≤ `.env`: `ELEVENLABS_API_KEY`

4. **–û–±–Ω–æ–≤–∏—Ç—å `.env`**
   ```env
   ASTERISK_ARI_URL=http://localhost:8088/ari
   ASTERISK_ARI_USERNAME=novofon_bot
   ASTERISK_ARI_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
   
   ELEVENLABS_API_KEY=–≤–∞—à_–∫–ª—é—á
   ```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç—å**
   ```bash
   python run_dev.py
   ```

**–ß—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:**
- ‚úÖ –í—Å—ë –∏–∑ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ SIP –∑–≤–æ–Ω–∫–∏ —á–µ—Ä–µ–∑ NovoFon
- ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (ASR)
- ‚úÖ –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ (TTS)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∏–∞–ª–æ–≥–∏ –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—é

---

## üìä API Endpoints (–≤—Å–µ–≥–æ 26):

### System (3)
- `GET /health` - –æ–±—â–∏–π health check
- `GET /health/database` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
- `GET /health/novofon` - –ø—Ä–æ–≤–µ—Ä–∫–∞ NovoFon API

### Calls (6)
- `POST /api/calls/initiate` - –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –∑–≤–æ–Ω–æ–∫
- `GET /api/calls/{call_id}` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–≤–æ–Ω–∫–µ
- `GET /api/calls/{call_id}/messages` - –¥–∏–∞–ª–æ–≥
- `GET /api/calls` - —Å–ø–∏—Å–æ–∫ –∑–≤–æ–Ω–∫–æ–≤
- `POST /api/calls/{call_id}/hangup` - –∑–∞–≤–µ—Ä—à–∏—Ç—å
- `DELETE /api/calls/{call_id}` - —É–¥–∞–ª–∏—Ç—å

### Queue (9)
- `POST /api/queue/add` - –¥–æ–±–∞–≤–∏—Ç—å –≤ –æ—á–µ—Ä–µ–¥—å
- `POST /api/queue/bulk-add` - –º–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
- `GET /api/queue` - —Å–ø–∏—Å–æ–∫ –æ—á–µ—Ä–µ–¥–∏
- `GET /api/queue/{item_id}` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–¥–∞—á–µ
- `POST /api/queue/{item_id}/cancel` - –æ—Ç–º–µ–Ω–∏—Ç—å
- `DELETE /api/queue/{item_id}` - —É–¥–∞–ª–∏—Ç—å
- `GET /api/queue/stats/summary` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `POST /api/queue/control/start` - –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É
- `POST /api/queue/control/stop` - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å

---

## üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (.env):

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
```env
DATABASE_URL=sqlite+aiosqlite:///./novofon_bot.db
NOVOFON_API_KEY=–≤–∞—à_–∫–ª—é—á
NOVOFON_FROM_NUMBER=+79991234567
```

### –î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:
```env
ELEVENLABS_API_KEY=–≤–∞—à_–∫–ª—é—á
ASTERISK_ARI_URL=http://localhost:8088/ari
ASTERISK_ARI_USERNAME=novofon_bot
ASTERISK_ARI_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### 1. –ë–∞–∑–æ–≤–æ–µ (–ë–ï–ó Asterisk):
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
python run_dev.py

# –û—Ç–∫—Ä—ã—Ç—å Swagger
# http://localhost:8000/docs

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
# - Health checks
# - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å
# - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—å—é
```

### 2. –° Asterisk:
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Asterisk (—Å–º. docs/)
# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏
# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å Asterisk
# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
# 5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∑–≤–æ–Ω–∫–∏
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `README.md` | –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| `QUICKSTART.md` | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç |
| `ASTERISK_QUICKSTART.md` | Asterisk –±—ã—Å—Ç—Ä–æ |
| `docs/ASTERISK_SETUP.md` | Asterisk –ø–æ–¥—Ä–æ–±–Ω–æ |
| `docs/ASTERISK_WINDOWS_WSL2.md` | Asterisk –Ω–∞ Windows |
| `docs/NOVOFON_API_TESTING.md` | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API |
| `asterisk_configs/README.md` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Asterisk |
| `PROGRESS.md` | –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |

---

## üéì –û–±—É—á–µ–Ω–∏–µ:

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:
- ‚úÖ Async Python (asyncio, aiohttp, websockets)
- ‚úÖ FastAPI best practices
- ‚úÖ SQLAlchemy async
- ‚úÖ WebSocket real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- ‚úÖ Finite State Machine (FSM)
- ‚úÖ Asterisk ARI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ Speech-to-Text / Text-to-Speech
- ‚úÖ VoIP (SIP/RTP)
- ‚úÖ Queue management
- ‚úÖ Error handling –∏ retry logic

---

## üîÆ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **Celery –≤–º–µ—Å—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏** (–¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è)
2. **Redis –¥–ª—è –∫–µ—à–∞** (–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
3. **Prometheus metrics** (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
4. **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** (–ø—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π)
5. **Kubernetes** (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)
6. **NLU** (Natural Language Understanding) –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è
7. **Multi-language** support (–Ω–µ—Å–∫–æ–ª—å–∫–æ —è–∑—ã–∫–æ–≤)
8. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
9. **Dashboard** –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
10. **Webhook'–∏** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

---

## üí° –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

### –í–∞—Ä–∏–∞–Ω—Ç A: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   - –°–æ–∑–¥–∞—Ç—å `.env`
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API —á–µ—Ä–µ–∑ Swagger

2. **–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Asterisk:**
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ WSL2 (Windows) –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é (Linux)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SIP —Ç—Ä–∞–Ω–∫ –∫ NovoFon
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∑–≤–æ–Ω–∫–∏

3. **–î–æ–±–∞–≤–∏—Ç—å ElevenLabs:**
   - –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ASR/TTS
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∏–∞–ª–æ–≥–∏

---

### –í–∞—Ä–∏–∞–Ω—Ç B: –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

1. **–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å VPS** (Ubuntu 22.04)
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   - Python 3.11+
   - PostgreSQL
   - Asterisk
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–µ–∫—Ç:**
   - –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å systemd —Å–µ—Ä–≤–∏—Å—ã
4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ:**
   - Uvicorn + Supervisor
   - Nginx reverse proxy
   - SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

---

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞:

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å:
1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `docs/`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `logs/app.log`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Swagger UI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

---

## üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é!

**–í—ã –ø–æ–ª—É—á–∏–ª–∏ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –≥–æ–ª–æ—Å–æ–≤–æ–π –±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–≤–æ–Ω–∫–æ–≤!**

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã:
- ‚úÖ Backend (FastAPI)
- ‚úÖ Database (SQLAlchemy)
- ‚úÖ SIP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (Asterisk)
- ‚úÖ Voice AI (ElevenLabs)
- ‚úÖ Dialogue management (FSM)
- ‚úÖ Queue system

**–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É!** üöÄ

---

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞:** 2024-11-14  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

